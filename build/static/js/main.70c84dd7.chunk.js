(this["webpackJsonpmidway-faas-ots-demo"]=this["webpackJsonpmidway-faas-ots-demo"]||[]).push([[0],{152:function(e,t,a){e.exports=a(295)},157:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return W}));var n=a(0),l=a.n(n),r=a(12),c=a.n(r),o=(a(157),a(31)),i=a(302),u=a(298),m=a(301),s=a(297),d=a(299),E=a(100),h=a(42),g=a(24),f=a(128),b=a(129),p=a(150),v=a(147),y=a(37),O=a.n(y),j=a(303),w=a(130),S=a.n(w),k=function(e){Object(p.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(f.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={data:[],loading:!1,hasMore:!0,author:localStorage.getItem("author")},e.fetchData=O.a.get("/api/blog/list").then((function(e){return e.data})),e.handleInfiniteOnLoad=function(){var t=e.state.data;if(e.setState({loading:!0}),t.length>14)return j.b.warning("Infinite List loaded all"),void e.setState({hasMore:!1,loading:!1});e.fetchData.then((function(a){t=t.concat(a),e.setState({data:t,loading:!1})}))},e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchData.then((function(t){e.setState({data:t.list})}))}},{key:"renderRow",value:function(e){return l.a.createElement("div",{key:e.id,className:"row"},l.a.createElement("div",{className:"image"}),l.a.createElement("div",{className:"content"},l.a.createElement("div",null,e.title),l.a.createElement("div",{className:"content"},e.content.substring(0,100).concat("...")),l.a.createElement("div",{className:"author"},"by   ",e.author),l.a.createElement(E.a,{type:"dashed"},l.a.createElement(h.b,{to:"/detail?".concat(e.id)},"\u70b9\u51fb\u67e5\u770b\u8be6\u60c5"))))}},{key:"render",value:function(){return l.a.createElement("div",{className:"demo-infinite-container"},l.a.createElement(S.a,{initialLoad:!1,pageStart:0,loadMore:this.handleInfiniteOnLoad,hasMore:!this.state.loading&&this.state.hasMore,useWindow:!1},l.a.createElement("div",{className:"list"},this.state.data.map(this.renderRow.bind(this)))),l.a.createElement(E.a,null,"  ",this.state.author?l.a.createElement(h.b,{to:"new"},"\u70b9\u51fb\u65b0\u589e\u535a\u5ba2"):"\u8bf7\u5148\u767b\u5165\u624d\u80fd\u65b0\u589e\u535a\u5ba2\u54e6"," "))}}]),a}(l.a.Component);function I(){return l.a.createElement("div",null," ",l.a.createElement("h1",null,"\u8fd9\u4e2ablog\u6709\u5f88\u591a\u4e0d\u8db3"),l.a.createElement("h1",null,"\u4f46\u4ffa\u624d\u5feb\u5927\u4e8c\uff0c\u6709\u65f6\u95f4\u53bb\u5347\u7ea7\u548c\u7ef4\u62a4"),l.a.createElement("h1",null,"\u6c42\u5927\u5bb6\u70b9\u8d5e^ ^"))}var x=a(304);function C(){return l.a.createElement("div",null," ",l.a.createElement(x.a,{message:"\u8bf7\u6ce8\u610f",description:"\u4e0d\u8981\u53d1\u4e0d\u826f\u7684\u4fe1\u606f\u5466!",type:"info",showIcon:!0}))}var N=a(300),B=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),u=Object(o.a)(c,2),m=u[0],s=u[1];return l.a.createElement(N.a,{name:"basic",initialValues:{remember:!0},layout:"inline"},l.a.createElement(N.a.Item,{label:"\u7528\u6237\u540d",name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d"}]},l.a.createElement(i.a,{onChange:function(e){r(e.target.value)}})),l.a.createElement(N.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801"}]},l.a.createElement(i.a.Password,{onChange:function(e){s(e.target.value)}})),l.a.createElement(N.a.Item,null,l.a.createElement(E.a,{type:"primary",htmlType:"submit",onClick:function(){O.a.post("/api/user/login",{username:a,password:m}).then((function(e){e.data.success?(console.log(e.data),localStorage.setItem("author",e.data.author),alert("\u767b\u5f55\u6210\u529f")):alert("\u767b\u5f55\u5931\u8d25")}))}},"\u767b\u5165")))};function M(){var e=window.location.search.split("?")[1],t=localStorage.getItem("author"),a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),d=m[0],g=m[1],f=Object(n.useState)(""),b=Object(o.a)(f,2),p=b[0],v=b[1];O.a.get("/api/blog/detail?id=".concat(e)).then((function(e){return e.data})).then((function(e){i(e.author),v(e.title),g(e.content)}));return l.a.createElement("div",null,l.a.createElement(s.a,{align:"middle",justify:"center"},l.a.createElement("h2",{className:"title"},p)),l.a.createElement(s.a,null,l.a.createElement("div",null,l.a.createElement("span",{style:{color:"grey",fontSize:"12px"}}," write By ",c),l.a.createElement("span",{style:{color:"grey",fontSize:"12px"}}," "))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("p",null,d)),l.a.createElement(E.a,null,t===c?l.a.createElement(h.b,{to:"/update?".concat(e)},"\u66f4\u65b0"):""),l.a.createElement("br",null),t===c?l.a.createElement(E.a,{onClick:function(){O()("/api/blog/del?id=".concat(e)).then((function(e){return e.data})).then((function(e){e.success?alert("\u5220\u9664\u6210\u529f"):alert("\u5220\u9664\u5931\u8d25")}))}},"\u5220\u9664 "):l.a.createElement("div",null))}function q(){var e=window.location.search.split("?")[1],t=i.a.TextArea,a=Object(n.useState)(""),r=Object(o.a)(a,2),c=r[0],u=r[1],m=Object(n.useState)(""),s=Object(o.a)(m,2),d=s[0],h=s[1],g=localStorage.getItem("author");return l.a.createElement("div",null," ",l.a.createElement(i.a,{onChange:function(e){u(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}),l.a.createElement(t,{onChange:function(e){h(e.target.value)},rows:4,placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9"}),l.a.createElement(E.a,{onClick:function(){O()("/api/blog/update?id=".concat(e,"&title=").concat(c,"&content=").concat(d,"&author=").concat(g)).then((function(e){return e.data})).then((function(e){e?alert("\u66f4\u65b0\u6210\u529f"):alert("\u66f4\u65b0\u5931\u8d25")}))}},"\u63d0\u4ea4\u66f4\u65b0"))}var A=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(""),u=Object(o.a)(c,2),m=u[0],s=u[1];return l.a.createElement(N.a,{name:"basic",layout:"inline",initialValues:{remember:!0}},l.a.createElement(N.a.Item,{label:"\u7528\u6237\u540d",name:"\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d!"}]},l.a.createElement(i.a,{onChange:function(e){r(e.target.value)}})),l.a.createElement(N.a.Item,{label:"\u5bc6\u7801",name:"\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4f60\u7684\u5bc6\u7801!"}]},l.a.createElement(i.a.Password,{onChange:function(e){s(e.target.value)}})),l.a.createElement(N.a.Item,null,l.a.createElement(E.a,{htmlType:"submit",onClick:function(){O.a.post("/api/user/register",{username:a,password:m}).then((function(e){return e.data})).then((function(e){e?alert("\u6ce8\u518c\u6210\u529f\uff0c\u5feb\u53bb\u767b\u5165\u5427"):alert("\u6ce8\u518c\u5931\u8d25")}))}},"\u6ce8\u518c")))};function D(){var e=i.a.TextArea,t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)(""),m=Object(o.a)(u,2),s=m[0],d=m[1],h=localStorage.getItem("author");return l.a.createElement("div",null," ",l.a.createElement(i.a,{onChange:function(e){c(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"}),l.a.createElement(e,{onChange:function(e){d(e.target.value)},rows:4,placeholder:"\u8bf7\u8f93\u5165\u5185\u5bb9"}),l.a.createElement(E.a,{onClick:function(){O()("/api/blog/new?title=".concat(r,"&content=").concat(s,"&author=").concat(h)).then((function(e){return e.data})).then((function(e){e.success?alert("\u65b0\u589e\u6210\u529f"):alert("\u65b0\u589e\u5931\u8d25")}))}},"\u63d0\u4ea4"))}var L=a(308),T=a(306),z=a(305),F=a(307),H=i.a.Search,J=(L.a,u.a.Header),P=u.a.Sider,R=u.a.Content,V=u.a.Footer;function K(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,null,l.a.createElement(u.a,null,l.a.createElement(P,{className:"sider",collapsible:!0,trigger:null,breakpoint:"lg",onBreakpoint:function(){r(!a)}},l.a.createElement(m.a,{className:"menu",mode:"inline",defaultSelectedKeys:["1"]},l.a.createElement(m.a.Item,{key:"1",icon:l.a.createElement(T.a,null)},l.a.createElement(h.b,{to:"/"},"\u9996\u9875")),l.a.createElement(m.a.Item,{key:"2",icon:l.a.createElement(z.a,null)},l.a.createElement(h.b,{to:"/advise"},"\u987b\u77e5")),l.a.createElement(m.a.Item,{key:"3",icon:l.a.createElement(F.a,null)},l.a.createElement(h.b,{to:"/tea"}," \u6350\u8d60 ")))),l.a.createElement(u.a,{className:"site-layout"},l.a.createElement(J,{className:"site-layout-background",style:{padding:0}},l.a.createElement(s.a,{style:{background:"white"}},l.a.createElement(d.a,{span:6}),l.a.createElement(d.a,null,l.a.createElement(H,{placeholder:"\u76ee\u524d\u8fd8\u4e0d\u652f\u6301\u641c\u7d22\u529f\u80fd",style:{width:200}})),l.a.createElement(d.a,{span:6}),l.a.createElement(d.a,null,l.a.createElement(E.a,{type:"primary",style:{}},l.a.createElement(h.b,{to:"/login"},"\u767b\u5165")),l.a.createElement(E.a,null,l.a.createElement(h.b,{to:"/register"},"\u6ce8\u518c"))))),l.a.createElement(R,{className:"site-layout-background",style:{margin:"24px 16px",padding:24,minHeight:800}},l.a.createElement(g.a,{path:"/",exact:!0,render:function(){return l.a.createElement(k,null)}}),l.a.createElement(g.a,{path:"/advise",exact:!0,render:function(){return l.a.createElement(C,null)}}),l.a.createElement(g.a,{path:"/tea",exact:!0,render:function(){return l.a.createElement(I,null)}}),l.a.createElement(g.a,{path:"/login",exact:!0,render:function(){return l.a.createElement(B,null)}}),l.a.createElement(g.a,{path:"/register",exact:!0,render:function(){return l.a.createElement(A,null)}}),l.a.createElement(g.a,{path:"/detail",exact:!0,render:function(){return l.a.createElement(M,null)}}),l.a.createElement(g.a,{path:"/update",exact:!0,render:function(){return l.a.createElement(q,null)}}),l.a.createElement(g.a,{path:"/new",exact:!0,render:function(){return l.a.createElement(D,null)}})),l.a.createElement(V,{style:{textAlign:"center"}},"BBBlog \xa92020 Created by kunpeng")))))}function W(){return l.a.createElement("div",null,l.a.createElement(K,null))}c.a.render(l.a.createElement(W,null),document.getElementById("root"))}},[[152,1,2]]]);
//# sourceMappingURL=main.70c84dd7.chunk.js.map